var Ambilight=function(){function t(t){t=t||{},this.options=Object.assign({includeCSS:!0},t),this.options.includeCSS&&i()}function e(t){var e=t,a=document.createElement("div");a.className="ambilight__container",e.getAttribute("data-ambilight").length>0&&(a.id=e.getAttribute("data-ambilight"));var i=e.cloneNode(!0);i.classList.add("ambilight__visible");var n=document.createElement("canvas");n.className="ambilight__shadow",i.removeAttribute("data-ambilight"),function(t,e){function a(){i.clearRect(0,0,e.width,e.height),i.drawImage(t,0,0,e.width,e.height),n&&window.requestAnimationFrame(a)}var i=e.getContext("2d"),n=!0;t.onloadeddata=function(){window.requestAnimationFrame(a)},t.onplay=function(){n=!0,window.requestAnimationFrame(a)},t.onpause=function(){n=!1},t.onabort=function(){n=!1}}(i,n),a.appendChild(i),a.appendChild(n),e.parentNode.insertBefore(a,e),e.parentNode.removeChild(e)}function a(t){var e=document.createElement("div");e.className="ambilight__container",t.getAttribute("data-ambilight").length>0&&(e.id=t.getAttribute("data-ambilight"));var a=t.cloneNode(!0);a.classList.add("ambilight__visible");var i=t.cloneNode(!0);i.className="ambilight__shadow",a.removeAttribute("data-ambilight"),i.removeAttribute("data-ambilight"),function(t,e){a.onload=function(){i.src=a.src}}(a,i),e.appendChild(a),e.appendChild(i),t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)}function i(){var t="LmFtYmlsaWdodF9fY29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlfS5hbWJpbGlnaHRfX3Zpc2libGV7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwO3dpZHRoOjEwMCV9LmFtYmlsaWdodF9fc2hhZG93e2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt6LWluZGV4OjU7bGVmdDowO3RvcDowOy13ZWJraXQtZmlsdGVyOmJsdXIoNDVweCk7LW1vei1maWx0ZXI6Ymx1cig0NXB4KTstbXMtZmlsdGVyOmJsdXIoNDVweCk7ZmlsdGVyOmJsdXIoNDVweCl9",e=document.createElement("style");e.textContent=atob(t);var a=document.querySelector("head");a.appendChild(e)}return t.prototype.render=function(){for(var t=document.querySelectorAll("img[data-ambilight]"),i=0;i<t.length;i++)a(t[i]);for(var n=document.querySelectorAll("video[data-ambilight]"),i=0;i<n.length;i++)e(n[i])},t.prototype.discard=function(){var t=document.querySelectorAll(".ambilight__shadow");t.forEach(function(t){t.style.display="none"})},t}();